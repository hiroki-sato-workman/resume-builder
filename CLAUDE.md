# CLAUDE.md

このファイルはClaude Code (claude.ai/code) がこのリポジトリで作業する際のガイダンスを提供します。

## プロジェクトについて

職務経歴書の作成をサポートするReactアプリケーションです。ユーザーは職務経歴情報を入力し、プレビューモードに切り替えてページを印刷することで職務経歴書を作成できます。

### 主な機能
- 職務経歴入力機能
- プレビュー機能  
- 入力内容の自動保存（localStorageに保存）

### 入力項目
- 氏名
- 職務要約
- 得意とする分野・スキル
- PCスキル/テクニカルスキル
- 職務経歴
- 資格
- 自己PR

## コマンド

### 開発
- `npm start` - 開発サーバー起動（http://localhost:3000 で実行）
- `npm run build` - `build/`フォルダに本番用バンドルをビルド
- `npm test` - インタラクティブウォッチモードでテスト実行

### デプロイ
- GitHub Actionsによる自動デプロイ（mainブランチへのpush時）
- `npm run build`でビルド後、デプロイスクリプトで`build/`を`docs/`に移動してGitHub Pagesにデプロイ
- 本番URL: https://hiroki-sato-workman.github.io/resume-builder

### 環境
- Create React Appで作成されたTypeScript Reactアプリケーション
- コードベース全体で日本語のコンポーネントとコメントを使用

## アーキテクチャ概要

### 状態管理
このアプリケーションは洗練されたatomアーキテクチャを持つ**Jotai**を状態管理に使用：

- **メインデータatom**: `resumeDataAtom` - すべての履歴書データを含むlocalStorage永続化atom
- **派生atom**: 各履歴書セクション用の個別atom（氏名、職務要約、得意分野など）
- **複雑なatomファミリー**: 会社と経験のネストしたatomファミリーによる詳細な職歴管理
- **編集モード**: `isEditModeAtom`がグローバルに表示/編集状態を制御

### 主要なデータ構造
- `ResumeData` - すべての履歴書セクションを含むメインデータインターフェース
- `WorkCompanyMap` - 職歴用のネスト構造（会社 → 経験）
- `WorkExperience` - 業務詳細、技術環境、組織情報を含む複雑なプロジェクトデータ
- `workHistoryAtoms.ts`での細かい職歴状態管理のためのatomファミリーの広範な使用

### コンポーネントアーキテクチャ
- **レイアウト**: `App.tsx`が`AppTemplate`ラッパーですべてのメインセクションをレンダリング
- **コンポーネント**: 各履歴書セクションがindex.tsエクスポートを持つ独自のコンポーネントフォルダを持つ
- **デュアルモード**: ほとんどのコンポーネントが表示/編集状態用の`isEditMode`プロップを受け取る
- **Material-UI**: カスタム日本語タイポグラフィテーマでMUIコンポーネントを使用
- **スタイルコンポーネント**: `styles/`でのビューモードスタイルを使ったカスタムスタイリング

### データ永続化
- **localStorage統合**: 自動永続化のためのJotaiの`atomWithStorage`経由
- **レガシーサービス**: `storage.service.ts`に古いlocalStorageユーティリティ（非推奨の可能性）
- **マイグレーションユーティリティ**: データ構造更新のための`migrateWorkHistory`

### プロジェクト構造
- `atoms/` - Jotai状態管理（メインatom + 職歴atomファミリー）
- `components/` - ネストしたフォルダ構造を持つ機能コンポーネント
- `services/` - ユーティリティサービス（日付、ストレージ）
- `shared/` - 再利用可能なコンポーネント、フック、ユーティリティ
- `styles/` - テーマとビューモードスタイリング
- `types.ts` - TypeScript型定義

### 職歴の複雑性
職歴セクションは以下の高度なatomファミリーパターンを使用：
- 会社レベルatom（`companyAtomFamily`）
- 会社内の各プロジェクト用の経験レベルatom
- 細かい更新用のフィールド固有atom（プロジェクト詳細、技術環境、組織）
- 経験を動的に追加/削除するためのユーティリティ関数

## コーディングルール

以下のコーディングルールを遵守すること：

- 関数の定義にはアロー関数を使うこと
- 関数にはJSDocを記載すること
- 関数やカスタムフックは戻り値型を指定すること
- 型指定は`type`を使用すること
- `let`は使用せず、必ず`const`を使うこと
- オブジェクトの再代入や配列の追加、削除はしないこと
- 可読性、メンテナンス性を考慮したコードとすること
- type assertionは使用しないこと
- `any`の使用を強く禁止する
- 特に`as any`は絶対に使用しないこと
- 文字列の結合にはテンプレート構文を使用すること

## 回答ルール

- すべて日本語で回答すること